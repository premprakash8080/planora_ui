<div class="team-performance-container">
  <!-- Page Header -->
  <div class="team-header">
    <div class="header-content">
      <h1 class="page-title">
        <mat-icon class="title-icon">people</mat-icon>
        Team Performance
      </h1>
      <p class="page-subtitle">Monitor team productivity and collaboration metrics</p>
    </div>
  </div>

  <!-- Team Metrics Cards -->
  <div class="metrics-section">
    <h2 class="section-title">
      <mat-icon class="section-icon">assessment</mat-icon>
      Team Metrics
    </h2>
    <div class="metrics-grid">
      <mat-card *ngFor="let metric of teamMetrics" class="metric-card" [style.border-left-color]="metric.color">
        <mat-card-content>
          <div class="metric-content">
            <div class="metric-icon-wrapper" [style.background]="'linear-gradient(135deg, ' + metric.color + '15, ' + metric.color + '05)'">
              <mat-icon [style.color]="metric.color" class="metric-icon">
                {{ metric.icon }}
              </mat-icon>
            </div>
            <div class="metric-info">
              <div class="metric-label">{{ metric.label }}</div>
              <div class="metric-value-wrapper">
                <div class="metric-value">{{ metric.value }}</div>
                <div class="metric-unit">{{ metric.unit }}</div>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Team Members Performance Table -->
  <div class="team-members-section">
    <h2 class="section-title">
      <mat-icon class="section-icon">group</mat-icon>
      Team Members Performance
    </h2>
    <mat-card class="table-card modern-card">
      <mat-card-content>
        <div class="table-wrapper">
          <table mat-table [dataSource]="teamMembers" class="team-table">
            
            <!-- Member Column -->
            <ng-container matColumnDef="member">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">person</mat-icon>
                  Team Member
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <div class="member-cell">
                  <div class="member-avatar" [style.background]="'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'">
                    {{ member.avatar }}
                  </div>
                  <div class="member-info">
                    <div class="member-name">{{ member.name }}</div>
                    <div class="member-status" [ngClass]="getStatusColor(member.status)">
                      <span class="status-dot"></span>
                      {{ member.status }}
                    </div>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Role Column -->
            <ng-container matColumnDef="role">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">work</mat-icon>
                  Role
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <span class="role-text">{{ member.role }}</span>
              </td>
            </ng-container>

            <!-- Tasks Assigned Column -->
            <ng-container matColumnDef="tasksAssigned">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">assignment</mat-icon>
                  Assigned
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <span class="task-count">{{ member.tasksAssigned }}</span>
              </td>
            </ng-container>

            <!-- Tasks Completed Column -->
            <ng-container matColumnDef="tasksCompleted">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">check_circle</mat-icon>
                  Completed
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <span class="task-count completed">{{ member.tasksCompleted }}</span>
              </td>
            </ng-container>

            <!-- Completion Rate Column -->
            <ng-container matColumnDef="completionRate">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">percent</mat-icon>
                  Completion Rate
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <div class="completion-rate-cell">
                  <span class="completion-percentage">{{ member.completionRate }}%</span>
                  <div class="completion-bar">
                    <div class="completion-fill" 
                         [style.width.%]="member.completionRate"
                         [style.background]="member.completionRate >= 90 ? 'linear-gradient(90deg, #4caf50, #66bb6a)' : member.completionRate >= 75 ? 'linear-gradient(90deg, #2196f3, #42a5f5)' : 'linear-gradient(90deg, #ff9800, #ffb74d)'">
                    </div>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Productivity Score Column -->
            <ng-container matColumnDef="productivityScore">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">trending_up</mat-icon>
                  Productivity Score
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <div class="productivity-score-cell">
                  <span class="score-value" [style.color]="getProductivityColor(member.productivityScore)">
                    {{ member.productivityScore }}
                  </span>
                  <div class="score-bar">
                    <div class="score-fill" 
                         [style.width.%]="member.productivityScore"
                         [style.background-color]="getProductivityColor(member.productivityScore)">
                    </div>
                  </div>
                </div>
              </td>
            </ng-container>

            <!-- Status Column -->
            <ng-container matColumnDef="status">
              <th mat-header-cell *matHeaderCellDef>
                <div class="table-header-cell">
                  <mat-icon class="header-icon">circle</mat-icon>
                  Status
                </div>
              </th>
              <td mat-cell *matCellDef="let member">
                <span class="status-badge" [ngClass]="getStatusColor(member.status)">
                  {{ member.status }}
                </span>
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns" class="table-header-row"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;" class="table-row"></tr>
          </table>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>

