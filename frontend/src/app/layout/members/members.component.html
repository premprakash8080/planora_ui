<div class="members-container">
  <div class="members-header">
    <div class="header-content">
      <h1 class="page-title">
        <mat-icon class="title-icon">group</mat-icon>
        Team Members
      </h1>
      <p class="page-subtitle">Manage and track your project team</p>
    </div>
    <div class="header-actions">
      <mat-form-field appearance="outline" class="search-field">
        <mat-label>Search members</mat-label>
        <input
          matInput
          placeholder="Search by name or role"
          [(ngModel)]="searchTerm"
          (ngModelChange)="applyFilters()"
        >
        <button mat-icon-button matSuffix *ngIf="searchTerm" (click)="clearSearch()">
          <mat-icon>close</mat-icon>
        </button>
      </mat-form-field>
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Role</mat-label>
        <mat-select [value]="selectedRole" (selectionChange)="onRoleChange($event)">
          <mat-option *ngFor="let role of roles" [value]="role">{{ role }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="filter-field">
        <mat-label>Status</mat-label>
        <mat-select [value]="selectedStatus" (selectionChange)="onStatusChange($event)">
          <mat-option *ngFor="let status of statuses" [value]="status">{{ status }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
  </div>

  <mat-card class="members-card">
    <div class="members-table-wrapper">
      <table mat-table [dataSource]="displayedMembers" class="members-table" matSort>

        <!-- Name Column -->
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
          <td mat-cell *matCellDef="let member">
            <div class="member-name">
              <div class="avatar">{{ member.name.charAt(0) }}</div>
              <div class="name-role">
                <span class="name">{{ member.name }}</span>
                <span class="role">{{ member.role }}</span>
              </div>
            </div>
          </td>
        </ng-container>

        <!-- Role Column -->
        <ng-container matColumnDef="role">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
          <td mat-cell *matCellDef="let member">{{ member.role }}</td>
        </ng-container>

        <!-- Projects Column -->
        <ng-container matColumnDef="projectsAssigned">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Projects</th>
          <td mat-cell *matCellDef="let member">{{ member.projectsAssigned }}</td>
        </ng-container>

        <!-- Status Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let member">
            <span class="status-badge" [ngClass]="member.status.toLowerCase()">{{ member.status }}</span>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>

      <div class="empty-state" *ngIf="displayedMembers.length === 0">
        <mat-icon>people_outline</mat-icon>
        <h3>No members found</h3>
        <p>Try adjusting your search or filters.</p>
      </div>
    </div>
  </mat-card>
</div>
